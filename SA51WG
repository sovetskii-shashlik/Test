--// Weapon Giver GUI

local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "WeaponSelectorGUI"
screenGui.Parent = CoreGui

local GUI_WIDTH = 200
local GUI_HEIGHT = 110

local frame = Instance.new("Frame")
frame.Parent = screenGui
frame.Size = UDim2.new(0, GUI_WIDTH, 0, GUI_HEIGHT)
frame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
frame.BackgroundTransparency = 0.65
frame.BorderSizePixel = 0
frame.Position = UDim2.new(0.5, -GUI_WIDTH/2, 0.5, -GUI_HEIGHT/2)
frame.Active = true
frame.Draggable = true

local corner = Instance.new("UICorner")
corner.Parent = frame
corner.CornerRadius = UDim.new(0.1, 0)

local borderFrame = Instance.new("Frame")
borderFrame.Size = frame.Size
borderFrame.Position = frame.Position
borderFrame.BackgroundTransparency = 1
borderFrame.AnchorPoint = frame.AnchorPoint
borderFrame.ZIndex = frame.ZIndex - 1
borderFrame.Parent = screenGui

local borderCorner = frame.UICorner:Clone()
borderCorner.Parent = borderFrame

local borderStroke = Instance.new("UIStroke")
borderStroke.Thickness = 3
borderStroke.LineJoinMode = Enum.LineJoinMode.Round
borderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
borderStroke.Parent = borderFrame

frame:GetPropertyChangedSignal("Position"):Connect(function()
    borderFrame.Position = frame.Position
end)

frame:GetPropertyChangedSignal("Size"):Connect(function()
    borderFrame.Size = frame.Size
end)

local titleLabel = Instance.new("TextLabel")
titleLabel.Parent = frame
titleLabel.Size = UDim2.new(0.9, 0, 0.15, 0)
titleLabel.Position = UDim2.new(0.05, 0, 0.09, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "Weapon Selector"
titleLabel.TextColor3 = Color3.new(1, 1, 1)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextStrokeTransparency = 0.7

local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = frame
statusLabel.Size = UDim2.new(0.9, 0, 0.3, 0)
statusLabel.Position = UDim2.new(0.05, 0, 0.25, 0)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Ready"
statusLabel.TextColor3 = Color3.new(1, 1, 1)
statusLabel.TextScaled = true
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextStrokeTransparency = 0.7

local buttonsContainer = Instance.new("Frame")
buttonsContainer.Parent = frame
buttonsContainer.Size = UDim2.new(0.9, 0, 0.4, 0)
buttonsContainer.Position = UDim2.new(0.05, 0, 0.6, 0)
buttonsContainer.BackgroundTransparency = 1

local toggleGuiButton = Instance.new("TextButton")
toggleGuiButton.Parent = buttonsContainer
toggleGuiButton.Size = UDim2.new(0.48, 0, 0.7, 0)
toggleGuiButton.Position = UDim2.new(0, 0, 0, 0)
toggleGuiButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
toggleGuiButton.BackgroundTransparency = 0.35
toggleGuiButton.Text = "Weapon List"
toggleGuiButton.TextColor3 = Color3.new(1, 1, 1)
toggleGuiButton.TextScaled = true
toggleGuiButton.BorderSizePixel = 0
toggleGuiButton.Font = Enum.Font.GothamBold

local toggleGuiButtonCorner = Instance.new("UICorner")
toggleGuiButtonCorner.Parent = toggleGuiButton
toggleGuiButtonCorner.CornerRadius = UDim.new(0.2, 0)

local toggleOtherButton = Instance.new("TextButton")
toggleOtherButton.Parent = buttonsContainer
toggleOtherButton.Size = UDim2.new(0.48, 0, 0.7, 0)
toggleOtherButton.Position = UDim2.new(0.52, 0, 0, 0)
toggleOtherButton.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
toggleOtherButton.BackgroundTransparency = 0.35
toggleOtherButton.Text = "Other Items"
toggleOtherButton.TextColor3 = Color3.new(1, 1, 1)
toggleOtherButton.TextScaled = true
toggleOtherButton.BorderSizePixel = 0
toggleOtherButton.Font = Enum.Font.GothamBold

local toggleOtherButtonCorner = Instance.new("UICorner")
toggleOtherButtonCorner.Parent = toggleOtherButton
toggleOtherButtonCorner.CornerRadius = UDim.new(0.2, 0)

local extendedFrame = Instance.new("Frame")
extendedFrame.Parent = screenGui
extendedFrame.Size = UDim2.new(0, 180, 0, 250)
extendedFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
extendedFrame.BackgroundTransparency = 0.65
extendedFrame.BorderSizePixel = 0
extendedFrame.Position = UDim2.new(0.5, -GUI_WIDTH/2 - 190, 0.5, -125)
extendedFrame.Visible = false
extendedFrame.Active = true
extendedFrame.Draggable = true

local extendedCorner = Instance.new("UICorner")
extendedCorner.Parent = extendedFrame
extendedCorner.CornerRadius = UDim.new(0.1, 0)

local extendedBorderFrame = Instance.new("Frame")
extendedBorderFrame.Size = extendedFrame.Size
extendedBorderFrame.Position = extendedFrame.Position
extendedBorderFrame.BackgroundTransparency = 1
extendedBorderFrame.AnchorPoint = extendedFrame.AnchorPoint
extendedBorderFrame.ZIndex = extendedFrame.ZIndex - 1
extendedBorderFrame.Parent = screenGui
extendedBorderFrame.Visible = false

local extendedBorderCorner = extendedCorner:Clone()
extendedBorderCorner.Parent = extendedBorderFrame

local extendedBorderStroke = Instance.new("UIStroke")
extendedBorderStroke.Thickness = 3
extendedBorderStroke.LineJoinMode = Enum.LineJoinMode.Round
extendedBorderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
extendedBorderStroke.Parent = extendedBorderFrame

extendedFrame:GetPropertyChangedSignal("Position"):Connect(function()
    extendedBorderFrame.Position = extendedFrame.Position
end)

extendedFrame:GetPropertyChangedSignal("Size"):Connect(function()
    extendedBorderFrame.Size = extendedFrame.Size
end)

local extendedTitle = Instance.new("TextLabel")
extendedTitle.Parent = extendedFrame
extendedTitle.Size = UDim2.new(0.9, 0, 0.1, 0)
extendedTitle.Position = UDim2.new(0.05, 0, 0.02, 0)
extendedTitle.BackgroundTransparency = 1
extendedTitle.Text = "Weapons"
extendedTitle.TextColor3 = Color3.new(1, 1, 1)
extendedTitle.TextScaled = true
extendedTitle.Font = Enum.Font.GothamBold
extendedTitle.TextStrokeTransparency = 0.7

local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Parent = extendedFrame
scrollFrame.Size = UDim2.new(0.9, 0, 0.85, 0)
scrollFrame.Position = UDim2.new(0.05, 0, 0.15, 0)
scrollFrame.BackgroundTransparency = 1
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 5
scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

local otherExtendedFrame = Instance.new("Frame")
otherExtendedFrame.Parent = screenGui
otherExtendedFrame.Size = UDim2.new(0, 180, 0, 150)
otherExtendedFrame.BackgroundColor3 = Color3.new(0.1, 0.1, 0.1)
otherExtendedFrame.BackgroundTransparency = 0.65
otherExtendedFrame.BorderSizePixel = 0
otherExtendedFrame.Position = UDim2.new(0.5, -GUI_WIDTH/2 - 190, 0.5, 40)
otherExtendedFrame.Visible = false
otherExtendedFrame.Active = true
otherExtendedFrame.Draggable = true

local otherExtendedCorner = Instance.new("UICorner")
otherExtendedCorner.Parent = otherExtendedFrame
otherExtendedCorner.CornerRadius = UDim.new(0.1, 0)

local otherExtendedBorderFrame = Instance.new("Frame")
otherExtendedBorderFrame.Size = otherExtendedFrame.Size
otherExtendedBorderFrame.Position = otherExtendedFrame.Position
otherExtendedBorderFrame.BackgroundTransparency = 1
otherExtendedBorderFrame.AnchorPoint = otherExtendedFrame.AnchorPoint
otherExtendedBorderFrame.ZIndex = otherExtendedFrame.ZIndex - 1
otherExtendedBorderFrame.Parent = screenGui
otherExtendedBorderFrame.Visible = false

local otherExtendedBorderCorner = otherExtendedCorner:Clone()
otherExtendedBorderCorner.Parent = otherExtendedBorderFrame

local otherExtendedBorderStroke = Instance.new("UIStroke")
otherExtendedBorderStroke.Thickness = 3
otherExtendedBorderStroke.LineJoinMode = Enum.LineJoinMode.Round
otherExtendedBorderStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Contextual
otherExtendedBorderStroke.Parent = otherExtendedBorderFrame

otherExtendedFrame:GetPropertyChangedSignal("Position"):Connect(function()
    otherExtendedBorderFrame.Position = otherExtendedFrame.Position
end)

otherExtendedFrame:GetPropertyChangedSignal("Size"):Connect(function()
    otherExtendedBorderFrame.Size = otherExtendedFrame.Size
end)

local otherExtendedTitle = Instance.new("TextLabel")
otherExtendedTitle.Parent = otherExtendedFrame
otherExtendedTitle.Size = UDim2.new(0.9, 0, 0.15, 0)
otherExtendedTitle.Position = UDim2.new(0.05, 0, 0.02, 0)
otherExtendedTitle.BackgroundTransparency = 1
otherExtendedTitle.Text = "Other Items"
otherExtendedTitle.TextColor3 = Color3.new(1, 1, 1)
otherExtendedTitle.TextScaled = true
otherExtendedTitle.Font = Enum.Font.GothamBold
otherExtendedTitle.TextStrokeTransparency = 0.7

local otherScrollFrame = Instance.new("ScrollingFrame")
otherScrollFrame.Parent = otherExtendedFrame
otherScrollFrame.Size = UDim2.new(0.9, 0, 0.8, 0)
otherScrollFrame.Position = UDim2.new(0.05, 0, 0.2, 0)
otherScrollFrame.BackgroundTransparency = 1
otherScrollFrame.BorderSizePixel = 0
otherScrollFrame.ScrollBarThickness = 5
otherScrollFrame.CanvasSize = UDim2.new(0, 0, 0, 0)

local function findWeapons()
    local weaponsFolder = workspace:FindFirstChild("Weapons")
    local weapons = {}

    if weaponsFolder then
        for _, weapon in ipairs(weaponsFolder:GetChildren()) do
            if weapon:IsA("Model") then
                local hitbox = weapon:FindFirstChild("Hitbox")
                if hitbox then
                    local touchInterest = hitbox:FindFirstChild("TouchInterest")
                    if touchInterest then
                        table.insert(weapons, {
                            Name = weapon.Name,
                            Model = weapon,
                            TouchInterest = touchInterest
                        })
                    end
                end
            end
        end
    end

    return weapons
end

local function activateTouchInterest(touchInterestPath)
    local current = workspace
    for _, partName in ipairs(touchInterestPath) do
        current = current:FindFirstChild(partName)
        if not current then
            statusLabel.Text = "Not found: " .. partName
            return false
        end
    end
    
    if current then
        local character = Players.LocalPlayer.Character
        if character then
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                firetouchinterest(humanoidRootPart, current.Parent, 0)
                firetouchinterest(humanoidRootPart, current.Parent, 1)
                statusLabel.Text = "Activated: " .. current.Parent.Name
                return true
            end
        end
    end
    statusLabel.Text = "Failed to activate"
    return false
end

local function activateWeapon(weaponData)
    if weaponData and weaponData.TouchInterest then
        local character = Players.LocalPlayer.Character
        if character then
            local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
            if humanoidRootPart then
                firetouchinterest(humanoidRootPart, weaponData.TouchInterest.Parent, 0)
                firetouchinterest(humanoidRootPart, weaponData.TouchInterest.Parent, 1)

                statusLabel.Text = "Gived: " .. weaponData.Name
                return true
            end
        end
    end
    statusLabel.Text = "Failed to give"
    return false
end

local function activateAllWeapons()
    local weapons = findWeapons()
    local character = Players.LocalPlayer.Character
    if not character then return false end
    
    local humanoidRootPart = character:FindFirstChild("HumanoidRootPart")
    if not humanoidRootPart then return false end
    
    local activatedCount = 0
    for _, weaponData in ipairs(weapons) do
        if weaponData and weaponData.TouchInterest then
            firetouchinterest(humanoidRootPart, weaponData.TouchInterest.Parent, 0)
            firetouchinterest(humanoidRootPart, weaponData.TouchInterest.Parent, 1)
            activatedCount = activatedCount + 1
        end
    end
    
    statusLabel.Text = "Gived ALL: " .. activatedCount .. " weapons"
    return activatedCount > 0
end

local function createWeaponButton(weaponData, position)
    local button = Instance.new("TextButton")
    button.Parent = scrollFrame
    button.Size = UDim2.new(1, 0, 0, 30)
    button.Position = position
    button.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    button.BackgroundTransparency = 0.35
    button.Text = weaponData.Name
    button.TextColor3 = Color3.new(1, 1, 1)
    button.TextScaled = true
    button.BorderSizePixel = 0
    button.Font = Enum.Font.Gotham
    button.AutoButtonColor = true

    local buttonCorner = Instance.new("UICorner")
    buttonCorner.Parent = button
    buttonCorner.CornerRadius = UDim.new(0.2, 0)

    button.MouseButton1Click:Connect(function()
        activateWeapon(weaponData)
    end)

    return button
end

local function createOtherButton(itemName, path, position)
    local button = Instance.new("TextButton")
    button.Parent = otherScrollFrame
    button.Size = UDim2.new(1, 0, 0, 30)
    button.Position = position
    button.BackgroundColor3 = Color3.new(0.3, 0.3, 0.3)
    button.BackgroundTransparency = 0.35
    button.Text = itemName
    button.TextColor3 = Color3.new(1, 1, 1)
    button.TextScaled = true
    button.BorderSizePixel = 0
    button.Font = Enum.Font.Gotham
    button.AutoButtonColor = true

    local buttonCorner = Instance.new("UICorner")
    buttonCorner.Parent = button
    buttonCorner.CornerRadius = UDim.new(0.2, 0)

    button.MouseButton1Click:Connect(function()
        activateTouchInterest(path)
    end)

    return button
end

local function updateWeaponsList()
    for _, child in ipairs(scrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end

    local weapons = findWeapons()

    if #weapons == 0 then
        local noWeaponsLabel = Instance.new("TextLabel")
        noWeaponsLabel.Parent = scrollFrame
        noWeaponsLabel.Size = UDim2.new(1, 0, 0, 30)
        noWeaponsLabel.Position = UDim2.new(0, 0, 0, 0)
        noWeaponsLabel.BackgroundTransparency = 1
        noWeaponsLabel.Text = "No weapons found"
        noWeaponsLabel.TextColor3 = Color3.new(1, 1, 1)
        noWeaponsLabel.TextScaled = true
        noWeaponsLabel.Font = Enum.Font.Gotham
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, 35)
    else
        local allButton = Instance.new("TextButton")
        allButton.Parent = scrollFrame
        allButton.Size = UDim2.new(1, 0, 0, 30)
        allButton.Position = UDim2.new(0, 0, 0, 0)
        allButton.BackgroundColor3 = Color3.new(0.2, 0.6, 0.2)
        allButton.BackgroundTransparency = 0.35
        allButton.Text = "ALL WEAPONS"
        allButton.TextColor3 = Color3.new(1, 1, 1)
        allButton.TextScaled = true
        allButton.BorderSizePixel = 0
        allButton.Font = Enum.Font.GothamBold
        allButton.AutoButtonColor = true

        local allButtonCorner = Instance.new("UICorner")
        allButtonCorner.Parent = allButton
        allButtonCorner.CornerRadius = UDim.new(0.2, 0)

        allButton.MouseButton1Click:Connect(function()
            activateAllWeapons()
        end)

        for i, weaponData in ipairs(weapons) do
            createWeaponButton(weaponData, UDim2.new(0, 0, 0, i*35))
        end
        scrollFrame.CanvasSize = UDim2.new(0, 0, 0, (#weapons + 1) * 35)
        statusLabel.Text = "Found " .. #weapons .. " weapons"
    end
end

local function updateOtherItemsList()
    for _, child in ipairs(otherScrollFrame:GetChildren()) do
        if child:IsA("TextButton") then
            child:Destroy()
        end
    end

    local otherItems = {
        {"Box of Shells", {"AREA51", "PlantRoom", "Box of Shells", "Box", "TouchInterest"}},
        {"Armory Giver", {"AREA51", "Amory2Room", "Armory", "Giver", "TouchInterest"}}
    }

    for i, itemData in ipairs(otherItems) do
        createOtherButton(itemData[1], itemData[2], UDim2.new(0, 0, 0, (i-1)*35))
    end
    otherScrollFrame.CanvasSize = UDim2.new(0, 0, 0, #otherItems * 35)
end

toggleGuiButton.MouseButton1Click:Connect(function()
    extendedFrame.Visible = not extendedFrame.Visible
    extendedBorderFrame.Visible = extendedFrame.Visible
    otherExtendedFrame.Visible = false
    otherExtendedBorderFrame.Visible = false

    if extendedFrame.Visible then
        updateWeaponsList()
    end
end)

toggleOtherButton.MouseButton1Click:Connect(function()
    otherExtendedFrame.Visible = not otherExtendedFrame.Visible
    otherExtendedBorderFrame.Visible = otherExtendedFrame.Visible
    extendedFrame.Visible = false
    extendedBorderFrame.Visible = false

    if otherExtendedFrame.Visible then
        updateOtherItemsList()
    end
end)